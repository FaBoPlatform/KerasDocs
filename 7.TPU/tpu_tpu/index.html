



<!DOCTYPE html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="クリップボードへコピー">
      
        <meta name="lang:clipboard.copied" content="コピーしました">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="何も見つかりませんでした">
      
        <meta name="lang:search.result.one" content="1件見つかりました">
      
        <meta name="lang:search.result.other" content="#件見つかりました">
      
        <meta name="lang:search.tokenizer" content="[\s\-　、。，．]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>TPU - FaBo Keras Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.11e41852.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#tpu" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="FaBo Keras Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                FaBo Keras Docs
              </span>
              <span class="md-header-nav__topic">
                TPU
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            検索キーワードを入力してください
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="FaBo Keras Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    FaBo Keras Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="FaBo Keras Docs" class="md-nav__link">
      FaBo Keras Docs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      1.開発環境の構築
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        1.開発環境の構築
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.開発環境の構築/dev/" title="開発環境" class="md-nav__link">
      開発環境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1.開発環境の構築/mnist/" title="MNIST" class="md-nav__link">
      MNIST
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      2.OpenCV
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        2.OpenCV
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../2.OpenCV/1.size/" title="1.Size" class="md-nav__link">
      1.Size
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2.OpenCV/2.crop/" title="2.Crop" class="md-nav__link">
      2.Crop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2.OpenCV/3.color/" title="3. 色成分の分解" class="md-nav__link">
      3. 色成分の分解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2.OpenCV/4.colorspace/" title="4.Color spaces" class="md-nav__link">
      4.Color spaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2.OpenCV/5.tips/" title="5.Tips" class="md-nav__link">
      5.Tips
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      3.End2end
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        3.End2end
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.End2end/dev_mac/" title="Dev mac" class="md-nav__link">
      Dev mac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.End2end/end2end_dataset/" title="End2End Dataset" class="md-nav__link">
      End2End Dataset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.End2end/end2end_emulator/" title="Emulator" class="md-nav__link">
      Emulator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.End2end/end2end_model/" title="End2End Modelの作成" class="md-nav__link">
      End2End Modelの作成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.End2end/end2end_run/" title="End2end run" class="md-nav__link">
      End2end run
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.End2end/end2end_save/" title="End2End Modelの作成" class="md-nav__link">
      End2End Modelの作成
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      4.SSD
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        4.SSD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../4.SSD/ssd/" title="SSD" class="md-nav__link">
      SSD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../4.SSD/ssd_mobilenet_v1_0.75_depth_coco/" title="Ssd mobilenet v1 0.75 depth coco" class="md-nav__link">
      Ssd mobilenet v1 0.75 depth coco
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../4.SSD/ssd_mobilenet_v1_fpn_coco/" title="Git clone直後の場合" class="md-nav__link">
      Git clone直後の場合
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../4.SSD/ssd_mobilenet_v1_ppn_coco/" title="Git clone直後の場合" class="md-nav__link">
      Git clone直後の場合
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../4.SSD/ssd_mobilenet_v1_quantized_coco/" title="Ssd mobilenet v1 quantized coco" class="md-nav__link">
      Ssd mobilenet v1 quantized coco
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../4.SSD/ssd_resnet_50_fpn_coco/" title="Ssd resnet 50 fpn coco" class="md-nav__link">
      Ssd resnet 50 fpn coco
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      5.CNN
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        5.CNN
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../5.CNN/traffic_sign/" title="信号認識" class="md-nav__link">
      信号認識
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      6.Sound
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        6.Sound
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../6.Sound/gmm_mfcc/" title="GMM on MFCC" class="md-nav__link">
      GMM on MFCC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../6.Sound/spectrum/" title="スペクトラグラム" class="md-nav__link">
      スペクトラグラム
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      7.TPU
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        7.TPU
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../android_support/" title="動作確認" class="md-nav__link">
      動作確認
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_android/" title="TPU Android" class="md-nav__link">
      TPU Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_config/" title="TPU" class="md-nav__link">
      TPU
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_dataset/" title="Dataset" class="md-nav__link">
      Dataset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_gcp/" title="GCPの設定" class="md-nav__link">
      GCPの設定
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_run/" title="TPU" class="md-nav__link">
      TPU
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_support/" title="TPUをサポートしているモデル" class="md-nav__link">
      TPUをサポートしているモデル
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tpu_tf/" title="TensorFlowの設定" class="md-nav__link">
      TensorFlowの設定
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        TPU
      </label>
    
    <a href="./" title="TPU" class="md-nav__link md-nav__link--active">
      TPU
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目次</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#config" title="Config" class="md-nav__link">
    Config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" title="変更点1" class="md-nav__link">
    変更点1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" title="変更点2" class="md-nav__link">
    変更点2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="変更点3" class="md-nav__link">
    変更点3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configgcs" title="ConfigをGCSにアップ" class="md-nav__link">
    ConfigをGCSにアップ
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      8.AutoML
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        8.AutoML
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../8.AutoML/automl/" title="AutoML" class="md-nav__link">
      AutoML
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目次</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#config" title="Config" class="md-nav__link">
    Config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" title="変更点1" class="md-nav__link">
    変更点1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" title="変更点2" class="md-nav__link">
    変更点2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="変更点3" class="md-nav__link">
    変更点3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configgcs" title="ConfigをGCSにアップ" class="md-nav__link">
    ConfigをGCSにアップ
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="tpu">TPU</h1>
<h2 id="config">Config</h2>
<div class=md-fenced-code-tabs id=tab-tab-group-0><input name=tab-group-0 type=radio id=tab-group-0-0_shell checked=checked class=code-tab data-lang=shell aria-controls=tab-group-0-0_shell-panel role=tab><label for=tab-group-0-0_shell class=code-tab-label data-lang=shell id=tab-group-0-0_shell-label>Shell</label><div class=code-tabpanel role=tabpanel data-lang=shell id=tab-group-0-0_shell-panel aria-labelledby=tab-group-0-0_shell-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>$ vi object_detection/samples/configs/ssd_mobilenet_v1_0.75_depth_quantized_300x300_pets_sync.config
</pre></div></td></tr></table></div><input name=tab-group-0 type=radio id=tab-group-0-1_sell class=code-tab data-lang=sell aria-controls=tab-group-0-1_sell-panel role=tab><label for=tab-group-0-1_sell class=code-tab-label data-lang=sell id=tab-group-0-1_sell-label>Sell</label><div class=code-tabpanel role=tabpanel data-lang=sell id=tab-group-0-1_sell-panel aria-labelledby=tab-group-0-1_sell-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=c1># SSD with Mobilenet v1 0.75 depth multiplied feature extractor and focal loss.</span>
<span class=c1># Trained on COCO14, initialized from Imagenet classification checkpoint</span>

<span class=c1># Achieves 17.5 mAP on COCO14 minival dataset. Doubling the number of training</span>
<span class=c1># steps gets to 18.4.</span>

<span class=c1># This config is TPU compatible</span>

<span class=kn>model</span> <span class=p>{</span>
  <span class=n>ssd</span> <span class=p>{</span>
    <span class=n>inplace_batchnorm_update</span><span class=p>:</span> <span class=n>true</span>
    <span class=n>freeze_batchnorm</span><span class=p>:</span> <span class=n>false</span>
    <span class=n>num_classes</span><span class=p>:</span> <span class=m>90</span>
    <span class=n>box_coder</span> <span class=p>{</span>
      <span class=n>faster_rcnn_box_coder</span> <span class=p>{</span>
        <span class=n>y_scale</span><span class=p>:</span> <span class=m>10.0</span>
        <span class=n>x_scale</span><span class=p>:</span> <span class=m>10.0</span>
        <span class=n>height_scale</span><span class=p>:</span> <span class=m>5.0</span>
        <span class=n>width_scale</span><span class=p>:</span> <span class=m>5.0</span>
      <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>matcher</span> <span class=p>{</span>
      <span class=n>argmax_matcher</span> <span class=p>{</span>
        <span class=n>matched_threshold</span><span class=p>:</span> <span class=m>0.5</span>
        <span class=n>unmatched_threshold</span><span class=p>:</span> <span class=m>0.5</span>
        <span class=n>ignore_thresholds</span><span class=p>:</span> <span class=n>false</span>
        <span class=n>negatives_lower_than_unmatched</span><span class=p>:</span> <span class=n>true</span>
        <span class=n>force_match_for_each_row</span><span class=p>:</span> <span class=n>true</span>
        <span class=n>use_matmul_gather</span><span class=p>:</span> <span class=n>true</span>
      <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>similarity_calculator</span> <span class=p>{</span>
      <span class=n>iou_similarity</span> <span class=p>{</span>
      <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>encode_background_as_zeros</span><span class=p>:</span> <span class=n>true</span>
    <span class=n>anchor_generator</span> <span class=p>{</span>
      <span class=n>ssd_anchor_generator</span> <span class=p>{</span>
        <span class=n>num_layers</span><span class=p>:</span> <span class=m>6</span>
        <span class=n>min_scale</span><span class=p>:</span> <span class=m>0.2</span>
        <span class=n>max_scale</span><span class=p>:</span> <span class=m>0.95</span>
        <span class=n>aspect_ratios</span><span class=p>:</span> <span class=m>1.0</span>
        <span class=n>aspect_ratios</span><span class=p>:</span> <span class=m>2.0</span>
        <span class=n>aspect_ratios</span><span class=p>:</span> <span class=m>0.5</span>
        <span class=n>aspect_ratios</span><span class=p>:</span> <span class=m>3.0</span>
        <span class=n>aspect_ratios</span><span class=p>:</span> <span class=m>0.3333</span>
      <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>image_resizer</span> <span class=p>{</span>
      <span class=n>fixed_shape_resizer</span> <span class=p>{</span>
        <span class=n>height</span><span class=p>:</span> <span class=m>300</span>
        <span class=n>width</span><span class=p>:</span> <span class=m>300</span>
      <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>box_predictor</span> <span class=p>{</span>
      <span class=n>convolutional_box_predictor</span> <span class=p>{</span>
        <span class=n>min_depth</span><span class=p>:</span> <span class=m>0</span>
        <span class=n>max_depth</span><span class=p>:</span> <span class=m>0</span>
        <span class=n>num_layers_before_predictor</span><span class=p>:</span> <span class=m>0</span>
        <span class=n>use_dropout</span><span class=p>:</span> <span class=n>false</span>
        <span class=n>dropout_keep_probability</span><span class=p>:</span> <span class=m>0.8</span>
        <span class=n>kernel_size</span><span class=p>:</span> <span class=m>1</span>
        <span class=n>box_code_size</span><span class=p>:</span> <span class=m>4</span>
        <span class=n>apply_sigmoid_to_scores</span><span class=p>:</span> <span class=n>false</span>
        <span class=n>class_prediction_bias_init</span><span class=p>:</span> <span class=m>-4.6</span>
        <span class=n>conv_hyperparams</span> <span class=p>{</span>
          <span class=n>activation</span><span class=p>:</span> <span class=n>RELU_6</span><span class=p>,</span>
          <span class=n>regularizer</span> <span class=p>{</span>
            <span class=n>l2_regularizer</span> <span class=p>{</span>
              <span class=n>weight</span><span class=p>:</span> <span class=m>0.00004</span>
            <span class=p>}</span>
          <span class=p>}</span>
          <span class=n>initializer</span> <span class=p>{</span>
            <span class=n>random_normal_initializer</span> <span class=p>{</span>
              <span class=n>stddev</span><span class=p>:</span> <span class=m>0.01</span>
              <span class=n>mean</span><span class=p>:</span> <span class=m>0.0</span>
            <span class=p>}</span>
          <span class=p>}</span>
          <span class=n>batch_norm</span> <span class=p>{</span>
            <span class=n>train</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
            <span class=n>scale</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
            <span class=n>center</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
            <span class=n>decay</span><span class=p>:</span> <span class=m>0.97</span><span class=p>,</span>
            <span class=n>epsilon</span><span class=p>:</span> <span class=m>0.001</span><span class=p>,</span>
          <span class=p>}</span>
        <span class=p>}</span>
      <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>feature_extractor</span> <span class=p>{</span>
      <span class=n>type</span><span class=p>:</span> <span class=err>&#39;</span><span class=n>ssd_mobilenet_v1</span><span class=err>&#39;</span>
      <span class=n>min_depth</span><span class=p>:</span> <span class=m>16</span>
      <span class=n>depth_multiplier</span><span class=p>:</span> <span class=m>0.75</span>
      <span class=n>conv_hyperparams</span> <span class=p>{</span>
        <span class=n>activation</span><span class=p>:</span> <span class=n>RELU_6</span><span class=p>,</span>
        <span class=n>regularizer</span> <span class=p>{</span>
          <span class=n>l2_regularizer</span> <span class=p>{</span>
            <span class=n>weight</span><span class=p>:</span> <span class=m>0.00004</span>
          <span class=p>}</span>
        <span class=p>}</span>
        <span class=n>initializer</span> <span class=p>{</span>
          <span class=n>truncated_normal_initializer</span> <span class=p>{</span>
            <span class=n>stddev</span><span class=p>:</span> <span class=m>0.03</span>
            <span class=n>mean</span><span class=p>:</span> <span class=m>0.0</span>
          <span class=p>}</span>
        <span class=p>}</span>
        <span class=n>batch_norm</span> <span class=p>{</span>
          <span class=n>train</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
          <span class=n>scale</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
          <span class=n>center</span><span class=p>:</span> <span class=n>true</span><span class=p>,</span>
          <span class=n>decay</span><span class=p>:</span> <span class=m>0.97</span><span class=p>,</span>
          <span class=n>epsilon</span><span class=p>:</span> <span class=m>0.001</span><span class=p>,</span>
        <span class=p>}</span>
      <span class=p>}</span>
      <span class=n>override_base_feature_extractor_hyperparams</span><span class=p>:</span> <span class=n>true</span>
    <span class=p>}</span>
    <span class=n>loss</span> <span class=p>{</span>
      <span class=n>classification_loss</span> <span class=p>{</span>
        <span class=n>weighted_sigmoid_focal</span> <span class=p>{</span>
          <span class=n>alpha</span><span class=p>:</span> <span class=m>0.75</span><span class=p>,</span>
          <span class=n>gamma</span><span class=p>:</span> <span class=m>2.0</span>
        <span class=p>}</span>
      <span class=p>}</span>
      <span class=n>localization_loss</span> <span class=p>{</span>
        <span class=n>weighted_smooth_l1</span> <span class=p>{</span>
          <span class=n>delta</span><span class=p>:</span> <span class=m>1.0</span>
        <span class=p>}</span>
      <span class=p>}</span>
      <span class=n>classification_weight</span><span class=p>:</span> <span class=m>1.0</span>
      <span class=n>localization_weight</span><span class=p>:</span> <span class=m>1.0</span>
    <span class=p>}</span>
    <span class=n>normalize_loss_by_num_matches</span><span class=p>:</span> <span class=n>true</span>
    <span class=n>normalize_loc_loss_by_codesize</span><span class=p>:</span> <span class=n>true</span>
    <span class=n>post_processing</span> <span class=p>{</span>
      <span class=n>batch_non_max_suppression</span> <span class=p>{</span>
        <span class=n>score_threshold</span><span class=p>:</span> <span class=m>1e-8</span>
        <span class=n>iou_threshold</span><span class=p>:</span> <span class=m>0.6</span>
        <span class=n>max_detections_per_class</span><span class=p>:</span> <span class=m>100</span>
        <span class=n>max_total_detections</span><span class=p>:</span> <span class=m>100</span>
      <span class=p>}</span>
      <span class=n>score_converter</span><span class=p>:</span> <span class=n>SIGMOID</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=n>train_config</span><span class=p>:</span> <span class=p>{</span>
  <span class=n>fine_tune_checkpoint</span><span class=p>:</span> <span class=err>&quot;</span><span class=n>PATH_TO_BE_CONFIGURED</span><span class=o>/</span><span class=n>model.ckpt</span><span class=err>&quot;</span>
  <span class=n>batch_size</span><span class=p>:</span> <span class=m>2048</span>
  <span class=n>sync_replicas</span><span class=p>:</span> <span class=n>true</span>
  <span class=n>startup_delay_steps</span><span class=p>:</span> <span class=m>0</span>
  <span class=n>replicas_to_aggregate</span><span class=p>:</span> <span class=m>8</span>
  <span class=n>num_steps</span><span class=p>:</span> <span class=m>10000</span>
  <span class=n>data_augmentation_options</span> <span class=p>{</span>
    <span class=n>random_horizontal_flip</span> <span class=p>{</span>
    <span class=p>}</span>
  <span class=p>}</span>
  <span class=n>data_augmentation_options</span> <span class=p>{</span>
    <span class=n>ssd_random_crop</span> <span class=p>{</span>
    <span class=p>}</span>
  <span class=p>}</span>
  <span class=n>optimizer</span> <span class=p>{</span>
    <span class=n>momentum_optimizer</span><span class=p>:</span> <span class=p>{</span>
      <span class=n>learning_rate</span><span class=p>:</span> <span class=p>{</span>
        <span class=n>cosine_decay_learning_rate</span> <span class=p>{</span>
          <span class=n>learning_rate_base</span><span class=p>:</span> <span class=m>0.9</span>
          <span class=n>total_steps</span><span class=p>:</span> <span class=m>10000</span>
          <span class=n>warmup_learning_rate</span><span class=p>:</span> <span class=m>0.3</span>
          <span class=n>warmup_steps</span><span class=p>:</span> <span class=m>300</span>
        <span class=p>}</span>
      <span class=p>}</span>
      <span class=n>momentum_optimizer_value</span><span class=p>:</span> <span class=m>0.9</span>
    <span class=p>}</span>
    <span class=n>use_moving_average</span><span class=p>:</span> <span class=n>false</span>
  <span class=p>}</span>
  <span class=n>max_number_of_boxes</span><span class=p>:</span> <span class=m>100</span>
  <span class=n>unpad_groundtruth_tensors</span><span class=p>:</span> <span class=n>false</span>
<span class=p>}</span>

<span class=n>train_input_reader</span><span class=p>:</span> <span class=p>{</span>
  <span class=n>tf_record_input_reader</span> <span class=p>{</span>
    <span class=n>input_path</span><span class=p>:</span> <span class=err>&quot;</span><span class=n>PATH_TO_BE_CONFIGURED</span><span class=o>/</span><span class=n>mscoco_train.record</span><span class=m>-00000</span><span class=o>-</span><span class=n>of</span><span class=m>-00100</span><span class=err>&quot;</span>
  <span class=p>}</span>
  <span class=n>label_map_path</span><span class=p>:</span> <span class=err>&quot;</span><span class=n>PATH_TO_BE_CONFIGURED</span><span class=o>/</span><span class=n>mscoco_label_map.pbtxt</span><span class=err>&quot;</span>
<span class=p>}</span>

<span class=n>eval_config</span><span class=p>:</span> <span class=p>{</span>
  <span class=n>metrics_set</span><span class=p>:</span> <span class=err>&quot;</span><span class=n>coco_detection_metrics</span><span class=err>&quot;</span>
  <span class=n>use_moving_averages</span><span class=p>:</span> <span class=n>false</span>
  <span class=n>num_examples</span><span class=p>:</span> <span class=m>8000</span>
<span class=p>}</span>

<span class=n>eval_input_reader</span><span class=p>:</span> <span class=p>{</span>
  <span class=n>tf_record_input_reader</span> <span class=p>{</span>
    <span class=n>input_path</span><span class=p>:</span> <span class=err>&quot;</span><span class=n>PATH_TO_BE_CONFIGURED</span><span class=o>/</span><span class=n>mscoco_val.record</span><span class=m>-00000</span><span class=o>-</span><span class=n>of</span><span class=m>-00010</span><span class=err>&quot;</span>
  <span class=p>}</span>
  <span class=n>label_map_path</span><span class=p>:</span> <span class=err>&quot;</span><span class=n>PATH_TO_BE_CONFIGURED</span><span class=o>/</span><span class=n>mscoco_label_map.pbtxt</span><span class=err>&quot;</span>
  <span class=n>shuffle</span><span class=p>:</span> <span class=n>false</span>
  <span class=n>num_readers</span><span class=p>:</span> <span class=m>1</span>
<span class=p>}</span>
</pre></div></td></tr></table></div></div>

<h2 id="1">変更点1</h2>
<div class=md-fenced-code-tabs id=tab-tab-group-1><input name=tab-group-1 type=radio id=tab-group-1-0_1dy6xaf54pvh1ez checked=checked class=code-tab data-lang aria-controls=tab-group-1-0_1dy6xaf54pvh1ez-panel role=tab><label for=tab-group-1-0_1dy6xaf54pvh1ez class=code-tab-label data-lang id=tab-group-1-0_1dy6xaf54pvh1ez-label></label><div class=code-tabpanel role=tabpanel data-lang id=tab-group-1-0_1dy6xaf54pvh1ez-panel aria-labelledby=tab-group-1-0_1dy6xaf54pvh1ez-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span>train_config: {
  fine_tune_checkpoint: &quot;PATH_TO_BE_CONFIGURED/model.ckpt&quot;
</pre></div></td></tr></table></div><input name=tab-group-1 type=radio id=tab-group-1-1_s5beb8wempx83xo class=code-tab data-lang aria-controls=tab-group-1-1_s5beb8wempx83xo-panel role=tab><label for=tab-group-1-1_s5beb8wempx83xo class=code-tab-label data-lang id=tab-group-1-1_s5beb8wempx83xo-label></label><div class=code-tabpanel role=tabpanel data-lang id=tab-group-1-1_s5beb8wempx83xo-panel aria-labelledby=tab-group-1-1_s5beb8wempx83xo-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span>train_config: {
    fine_tune_checkpoint: &quot;gs://your-bucket/data/model.ckpt&quot;
    fine_tune_checkpoint_type: &quot;detection&quot;
</pre></div></td></tr></table></div></div>

<h2 id="2">変更点2</h2>
<div class=md-fenced-code-tabs id=tab-tab-group-2><input name=tab-group-2 type=radio id=tab-group-2-0_k6urisg4enw4cxd checked=checked class=code-tab data-lang aria-controls=tab-group-2-0_k6urisg4enw4cxd-panel role=tab><label for=tab-group-2-0_k6urisg4enw4cxd class=code-tab-label data-lang id=tab-group-2-0_k6urisg4enw4cxd-label></label><div class=code-tabpanel role=tabpanel data-lang id=tab-group-2-0_k6urisg4enw4cxd-panel aria-labelledby=tab-group-2-0_k6urisg4enw4cxd-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span>train_input_reader: {
  tf_record_input_reader {
    input_path: &quot;PATH_TO_BE_CONFIGURED/mscoco_train.record-00000-of-00100&quot;
  }
  label_map_path: &quot;PATH_TO_BE_CONFIGURED/mscoco_label_map.pbtxt&quot;
}
</pre></div></td></tr></table></div><input name=tab-group-2 type=radio id=tab-group-2-1_qnxfjf2pg2hvod0 class=code-tab data-lang aria-controls=tab-group-2-1_qnxfjf2pg2hvod0-panel role=tab><label for=tab-group-2-1_qnxfjf2pg2hvod0 class=code-tab-label data-lang id=tab-group-2-1_qnxfjf2pg2hvod0-label></label><div class=code-tabpanel role=tabpanel data-lang id=tab-group-2-1_qnxfjf2pg2hvod0-panel aria-labelledby=tab-group-2-1_qnxfjf2pg2hvod0-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span>train_input_reader: {
  tf_record_input_reader {
    input_path: &quot;gs://YOUR_GCS_BUCKET/data/pet_faces_train*&quot;
  }
  label_map_path: &quot;gs://YOUR_GCS_BUCKET/data/pet_label_map.pbtxt&quot;
}
</pre></div></td></tr></table></div></div>

<h2 id="3">変更点3</h2>
<div class=md-fenced-code-tabs id=tab-tab-group-3><input name=tab-group-3 type=radio id=tab-group-3-0_1r9q0zx7f5kvf2m checked=checked class=code-tab data-lang aria-controls=tab-group-3-0_1r9q0zx7f5kvf2m-panel role=tab><label for=tab-group-3-0_1r9q0zx7f5kvf2m class=code-tab-label data-lang id=tab-group-3-0_1r9q0zx7f5kvf2m-label></label><div class=code-tabpanel role=tabpanel data-lang id=tab-group-3-0_1r9q0zx7f5kvf2m-panel aria-labelledby=tab-group-3-0_1r9q0zx7f5kvf2m-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span>eval_input_reader: {
  tf_record_input_reader {
    input_path: &quot;PATH_TO_BE_CONFIGURED/mscoco_val.record-00000-of-00010&quot;
  }
  label_map_path: &quot;PATH_TO_BE_CONFIGURED/mscoco_label_map.pbtxt&quot;
  shuffle: false
  num_readers: 1
}
</pre></div></td></tr></table></div><input name=tab-group-3 type=radio id=tab-group-3-1_zzbjzov9x8wpw5m class=code-tab data-lang aria-controls=tab-group-3-1_zzbjzov9x8wpw5m-panel role=tab><label for=tab-group-3-1_zzbjzov9x8wpw5m class=code-tab-label data-lang id=tab-group-3-1_zzbjzov9x8wpw5m-label></label><div class=code-tabpanel role=tabpanel data-lang id=tab-group-3-1_zzbjzov9x8wpw5m-panel aria-labelledby=tab-group-3-1_zzbjzov9x8wpw5m-label><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span>eval_input_reader: {
  tf_record_input_reader {
    input_path: &quot;gs://YOUR_GCS_BUCKET/data/pet_faces_val*&quot;
  }
  label_map_path: &quot;gs://YOUR_GCS_BUCKET/data/pet_label_map.pbtxt&quot;
  shuffle: false
  num_readers: 1
}
</pre></div></td></tr></table></div></div>

<h2 id="configgcs">ConfigをGCSにアップ</h2>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>$ gsutil cp object_detection/samples/configs/ssd_mobilenet_v1_0.75_depth_quantized_300x300_pets_sync.config gs://<span class=si>${</span><span class=nv>YOUR_GCS_BUCKET</span><span class=si>}</span>/data/pipeline.config
</pre></div></td></tr></table></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../tpu_tf/" title="TensorFlowの設定" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前
                </span>
                TensorFlowの設定
              </span>
            </div>
          </a>
        
        
          <a href="../../8.AutoML/automl/" title="AutoML" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  次
                </span>
                AutoML
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.9e1f3b71.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../assets/javascripts/lunr/lunr.jp.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
    
      
    
  </body>
</html>